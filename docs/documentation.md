# Documentation

## User class

### Description

Models a user of qBay.

### Attributes

**userId** : Integer
&emsp;Primary key used for ensuring record uniqueness in the db. Should be autogenerated upon insert.

**userFirstName** : String
&emsp;First name of user

**userLastName** : String
&emsp;Last name of user

**user_name** : String
&emsp; Unique system username

**password** : String
&emsp;User account password

**email** : String
&emsp;User email for registration and communication

**shipping_address** : String
&emsp;User shipping address

**postal_code** : String
&emsp;User postal code

**balance** : Float
&emsp;User Canadian dollar balance

**dateCreated** : Datetime
&emsp;User creation date

**review** : relationship (one to one)
&emsp;referencing items represented by review

**transaction** : relationship (one to one)
&emsp;referencing items represented by transaction

### Methods

**\_\_init\_\_** (email, user_name, password, first_name, last_name)
&emsp;Set balance to default value 100 and call register

**\_\_repr\_\_**
&emsp;Return string representation of a user

**register** (email, user_name, password, first_name, last_name)
&emsp; Calls functions to check if attribtues are valid. If valid sets user email, user_name, password, first_name, and last_name

**update_user_name** (self, user_name)
&emsp; Calls function to check if user_name valid. If valid updates the user_name.

**update_shipping_address** (self, shipping_address)
&emsp; Calls function to check if shipping_address valid. If valid updates the shipping_address.

**update_postal_code** (self, postal_code)
&emsp; Calls function to check if postal_code valid. If valid updates the postal_code.

**validUsername** (user_name)
&emsp; Checks if user_name non-empty, between 2 and 20 characters ,alphanumeric-only, and prefix or suffix not space

**validPassword** (password)
&emsp; Checks if password at least 6 characters, contains at least one uppercase, one lowercase, and one special character

**validPostalCode** (postal_code)
&emsp; Checks if postal code follow canadian postal code format

**validShippingAddress** (shipping_address)
&emsp; Check if shipping address is non-empty, alphanumeric-only, and no special characters

**login** (email,password)
&emsp; Calls functions to check if attribtues are valid. If valid sets user email and password

## Review class

### Description

The review class is a representation of a review left on a product by a verified buyer.

### Attributes

**reviewId** : Integer
&emsp;Primary key used for ensuring record uniqueness in the db. Should be autogenerated upon insert.

**score** : Integer
&emsp;A score ranging from 1 to 5 with 5 being the best and 1 being the worst

**date** : DateTime
&emsp;Date of when the review was submitted

**review** : String
&emsp; Contents of the review

**user_email** : User
&emsp;The user email of the review

**user** : relationship
&emsp;One to One relationship with the user

### Methods

**\_\_init\_\_** (self, reviewId, user_email, score, review):
&emsp;Create a new user

**\_\_repr\_\_** (self):
&emsp;Returns string representation of a review

**changeReview** (self, score, review):
&emsp;Method to change the score or description of the review

## Transaction Class

### Description

Models a sucessful purchase of a product between buyer and seller.

### Attributes

**id** : Integer
&emsp;Primary key used for ensuring record uniqueness in the db. Should be autogenerated incrementally upon insert.

**trasaction_number** : Integer
&emsp;Tracking number for order

**user_email** : String
&emsp;Email of the buyer, follows the RFC 5322 standard

**product_id** : Integer
&emsp;Id of the product sold

**price** : Float
&emsp;The price of the product

**date** : Datetime
&emsp;Date of order

**shipped** : Boolean
&emsp;Track shipping status

### Methods

**\_\_init\_\_** (buyer, product, date)
&emsp;Initialize transaction attributes of a new transaction

**\_\_repr\_\_**
&emsp;Return string representation of a transaction

## Product Class

### Description

Models a product and product detail

### Attributes

**id** : Integer
&emsp;Primary key used for product record in db. Should be autogenerated upon insert.

**title** : String
&emsp;Product title to identify the item

**description** : String
&emsp;Product description

**date_posted** : DateTime
&emsp;Date when the product is posted on the application

**last_modified_date** : DateTime
&emsp;Date when the product is was last modified

**price** : Float
&emsp;Price of the product

**owner_email** : String
&emsp;Reference to owner of the product through his/her email

**user** : User
&emsp;Reference to owner of the product

### Methods

**\_\_init\_\_** : (self, title, description, price, last_modified_date, owner_email)
&emsp;Create a new product

**set_title** : (self, title)
&emsp;Set title attribtute and do validation to ensure that it is alphanumeric with no spaces in prefix or suffix, as well as no greater than 80 characters.

**set_description** : (self, description)
&emsp;Set description attribtute and do validation to ensure that it is between 20 and 2000 characters and longer than the title.

**set_price** : (self, price)
&emsp;Sets the price attribute of the product, ensures that value is in between 10 and 10000, if out of bounds throws ValueError exception

**set_date** : (self, newDate)
&emsp;Sets the last_date_modified attribute of the product, ensures that value is between 2021 and 2050 if out of bounds throws ValueError exception

**set_email** : (self, email)
&emsp;Sets the owner_email attribute of the product, ensures that value is not empty, otherwise throws ValueError

**update_price** : (self, price)
&emsp;Ensures that the new price is greater than the old price and then sets the price.

**\_\_repr\_\_**
&emsp;Return string representation of a product

## Login functions

### Description

Functions for creating user and login user

### Functions

**login_valid_password** (email, password)
&emsp; check password validation before query to database in login_user method

**create_user** (email, user_name, password, first_name, last_name)
&emsp; Calls functions to create new user

**login_user** (email,password)
&emsp; Calls functions to check if the user exist. if the user exist, it is the right credential.

**update_user** (email, choice, attribute)
&emsp; Calls functions to update user profile based on choice in CLI.

## Product functions

### Description

Functions for creating and updating a product

### Functions

**create_product** (title, description, price, owner_email)
&emsp; Calls product constructor to create new product

**update_product** (old_title, new_title, description, price)
&emsp; Update a product's title, desciption, price

Function for placing an order and update users balance 

### Functions

**place_an_order** (title, email, balance)
&emsp; Calls function to place an order in the marketplace. It checks if the product exists, user cannot purchase their own product and user cannot buy the product if the balance is lower than the price.

**update_both_user_balance** (price, buyer_email, owner_email)
&emsp; Calls function to update balance of both buyer and seller.

## Command Line Interface

### Description

Functions for getting and handling user input and site navigation

### Functions

**login_page**
&emsp; Gets user input for email and password to login on QBay.

**register_page**
&emsp; Gets user input for email and password to register on QBay. Continues looping until valid user input received. Tells user why invalid input is invalid.

**update_user_page** (user)
&emsp; Gets user input for what they would like to update on QBay. Based on choice calls correct update function. Continues looping until valid user input received. Tells user why invalid input is invalid.

**user_home_page** (user)
&emsp; Displays user home page and provides options to create a product, update a product, update user profile or view profile details.

**product_creation_page** (user)
&emsp; Allows the user to create additional products.

**product_update_page** (user)
&emsp; Allows the user to update products that are assosiated with them.

**marketplace_page** (user)
&emsp; Display all the products and allows the user to buy product from other users.
